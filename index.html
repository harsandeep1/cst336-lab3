<!DOCTYPE html>
<html lang="en">
<head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta http-equiv="X-UA-Compatible" content="ie=edge">
      <title>Sign Up Page</title>
      <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.5.1.min.js"></script>
</head>
<body>
      <h1>Sign Up</h1>
      
      First Name:   <input type="text" name="fName"/><br>
      Last Name:    <input type="text" name="lName"/><br>
      Gender:       <input type="radio" name="gender" value="m"/> Male<br>
                    <input type="radio" name="gender" value="f"/> Female<br>
      
      Zip Code:     <input type="text" id="zip" name="zip"/><br>
      City:         <span id="city"></span><br>
      Latitude:     <br>
      Longitude:    <br><br>
      
      State:
                    <select name="state" id="state">
                          <option>Select One</option>
                          <option value="ca">California</option>
                          <option value="ny">New York</option>
                          <option value="tx">Texas</option>
                    </select><br>
                    
      Select a County: <select id="county"></select><br>
      
      Desired Username: <input type="text" name="username" id="username"/><br>
      
      Password:         <input type="password" name="password" id="password"/><br>
      Password Again:   <input type="password" id="passwordAgain"/>
      
      <input type="submit" value="Sign up!"/>
      
      
      <script>
            
            //Displaying City from API after typing a zip code
            $("#zip").on("change", async function(){
                  
                  // alert($("#zip").val());
                  let zipCode = $("#zip").val();
                  let url =  `https://itcdland.csumb.edu/~milara/ajax/cityInfoByZip.php?zip=${zipCode}`;
                  let response = await fetch(url);
                  let data = await response.json();
                  // console.log(data)
                  $("#city").html(data.city);
            
            }); //zip
            
            $("#state").on("change", async function(){
                  
                  // alert($("#state").val());
                  let state = $("#state").val();
                  let url =  `https://itcdland.csumb.edu/~milara/ajax/countyList.php?state=${state}`;
                  let response = await fetch(url);
                  let data = await response.json();
                  //console.log(data)
                  $("#county").html("<option> Select One </option");
                  // for(let i = 0; i < data.length; i++){
                  //       $("#county").append(`<option> ${data[i].county} </option`);
                  // }
                  data.forEach( function(i){
                        $("#county").append(`<option> ${i.county} </option`);
                  });
            
            });//state
      
      </script>

</body>
</html>